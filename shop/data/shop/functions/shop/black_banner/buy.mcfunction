execute if entity @s[scores={wins=..19}] unless entity @s[scores={wins=1}] run tellraw @s [{"text":"Shop » ","color":"yellow","bold":"true"},{"text":"You need at least ","color":"red","bold":"false"},{"text":"20","color":"red","underlined":"true","bold":"false"},{"text":" tokens to purchase the Rainbow Particle Trail! You currently have ","color":"red","bold":"false"},{"score":{"name":"@s","objective":"wins"},"color":"gold"},{"text":" tokens.\nObtain tokens by winning games while still alive!","color":"red","bold":"false"}]
execute if entity @s[scores={wins=..19}] if entity @s[scores={wins=1}] run tellraw @s [{"text":"Shop » ","color":"yellow","bold":"true"},{"text":"You need at least ","color":"red","bold":"false"},{"text":"20","color":"red","underlined":"true","bold":"false"},{"text":" tokens to purchase the Rainbow Particle Trail! You currently have ","color":"red","bold":"false"},{"score":{"name":"@s","objective":"wins"},"color":"gold"},{"text":" token.\nObtain tokens by winning games while still alive!","color":"red","bold":"false"}]
execute if entity @s[scores={wins=..19}] run item replace entity @s enderchest.24 with black_banner{HideFlags:33,BlockEntityTag:{Base:1,Patterns:[{Color:14,Pattern:"gra"},{Color:1,Pattern:"gru"},{Color:4,Pattern:"gru"},{Color:5,Pattern:"gru"},{Color:3,Pattern:"gru"}]},unench:1b,display:{Lore:["{\"text\":\" \"}","{\"text\":\"  Click to purchase\",\"color\":\"gray\",\"italic\":\"false\"}","{\"text\":\"    for 20 tokens!\",\"color\":\"gray\",\"italic\":\"false\"}","{\"text\":\" \"}"],Name:"{\"text\":\"Rainbow Particle Trail\",\"color\":\"red\",\"italic\":\"false\"}"}}
execute if entity @s[scores={wins=..19}] at @s run playsound minecraft:entity.villager.no ambient @s

execute if entity @s[scores={wins=20..}] run advancement grant @s only map:cosmetic_character
execute if entity @s[scores={wins=20..}] run tag @s add buyBlack
execute if entity @s[scores={wins=20..}] run tellraw @s [{"text":"Shop » ","color":"yellow","bold":"true"},{"text":"You purchased the ","color":"gray","bold":"false"},{"text":"R","color":"red","bold":"false"},{"text":"a","color":"gold","bold":"false"},{"text":"i","color":"yellow","bold":"false"},{"text":"n","color":"green","bold":"false"},{"text":"b","color":"aqua","bold":"false"},{"text":"o","color":"dark_purple","bold":"false"},{"text":"w","color":"light_purple","bold":"false"},{"text":" Particle Trail!","color":"gray","bold":"false"}]
execute if entity @s[scores={wins=20..}] run tellraw @a[tag=!buyBlack,scores={ingame=0}] [{"text":"Shop » ","color":"yellow","bold":"true"},{"selector":"@s","bold":"false"},{"text":" purchased the ","color":"gray","bold":"false"},{"text":"R","color":"red","bold":"false"},{"text":"a","color":"gold","bold":"false"},{"text":"i","color":"yellow","bold":"false"},{"text":"n","color":"green","bold":"false"},{"text":"b","color":"aqua","bold":"false"},{"text":"o","color":"dark_purple","bold":"false"},{"text":"w","color":"light_purple","bold":"false"},{"text":" Particle Trail!","color":"gray","bold":"false"}]
execute if entity @s[scores={wins=20..}] run tag @s remove buyBlack
execute if entity @s[scores={wins=20..}] run item replace entity @s enderchest.24 with black_banner{HideFlags:33,BlockEntityTag:{Base:1,Patterns:[{Color:14,Pattern:"gra"},{Color:1,Pattern:"gru"},{Color:4,Pattern:"gru"},{Color:5,Pattern:"gru"},{Color:3,Pattern:"gru"}]},ench:1b,Enchantments:[{id:"unbreaking",lvl:0}],display:{Lore:["{\"text\":\" \"}","[{\"text\":\"    Click to \",\"color\":\"gray\",\"italic\":false},{\"text\":\"Disable\",\"color\":\"red\",\"italic\":false},{\"text\":\"!\",\"color\":\"gray\",\"italic\":false}]","{\"text\":\" \"}","{\"text\":\"     Particles are\",\"color\":\"dark_gray\"}","{\"text\":\"     disabled while\",\"color\":\"dark_gray\"}","{\"text\":\"     holding sneak\",\"color\":\"dark_gray\"}","{\"text\":\" \"}"],Name:"{\"text\":\"Rainbow Particle Trail\",\"color\":\"green\",\"italic\":\"false\"}"}}
execute if entity @s[scores={wins=20..}] run scoreboard players set @s boughtBlackP 1
execute if entity @s[scores={wins=20..}] at @s run playsound minecraft:entity.player.levelup ambient @s
execute if entity @s[scores={wins=20..}] run tag @s remove shop_blackEnch
execute if entity @s[scores={wins=20..}] run title @s actionbar [{"text":"Enabled ","color":"green"},{"text":"R","color":"red"},{"text":"a","color":"gold"},{"text":"i","color":"yellow"},{"text":"n","color":"green"},{"text":"b","color":"aqua"},{"text":"o","color":"dark_purple"},{"text":"w","color":"light_purple"},{"text":" Particle Trail","color":"gray"}]
execute if entity @s[scores={wins=20..}] run scoreboard players remove @s wins 20